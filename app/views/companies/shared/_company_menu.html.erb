<!-- Company menu -->
<div class="flex items-center">
    <!-- Company menu dropdown -->
    <div 
      class="relative z-50"
      data-controller="dropdown"
    >
    <div>
      <button 
        data-action="dropdown#toggle click@window->dropdown#hide"
        class="flex text-sm rounded-full border-2 border-gray-300 focus:outline-none drop-shadow-2xl hover:drop-shadow-lg items-center" 
        id="company-menu-button" 
        type="button" 
        aria-expanded="false" 
        aria-haspopup="true"
      >
        <span class="sr-only">Open company menu</span>
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mx-2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
        </svg>
        <!-- Avatar -->
        <%= image_tag(current_company.avatar_attachment_path, class: "object-cover h-8 w-8 rounded-full border border-gray-500 m-1", alt: "avatar")%>
      </button>
    </div>

    <!--
      Dropdown menu, show/hide based on menu state.

      Entering: "transition ease-out duration-100"
        From: "transform opacity-0 scale-95"
        To: "transform opacity-100 scale-100"
      Leaving: "transition ease-in duration-75"
        From: "transform opacity-100 scale-100"
        To: "transform opacity-0 scale-95"
    -->
    <div 
        data-dropdown-target="menu"
        class="hidden origin-top-right absolute z-50 right-0 mt-2 min-w-max rounded-lg shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none" 
        role="menu" 
        aria-orientation="vertical" 
        aria-labelledby="company-menu-button" 
        tabindex="-1"
        data-transition-enter-from="opacity-0 scale-95"
        data-transition-enter-to="opacity-100 scale-100"
        data-transition-leave-from="opacity-100 scale-100"
        data-transition-leave-to="opacity-0 scale-95"
    >
      <!-- Active: "bg-gray-100", Not Active: "" -->

      <%= link_to companies_profile_path, 
          class: "font-medium flex flex-col items-center my-3 mx-2", 
          data: {action: "dropdown#toggle"}, 
          role: "menuitem",
          tabindex:"-1",
          id:"personalInfoLink" do
      %>
          <!-- Avatar -->
          <%= image_tag(current_company.avatar_attachment_path, class: "object-cover w-16 h-16 mx-2 mb-3 rounded-full", alt: "avatar")%>
          <!-- Rating -->
          <%= tag.div (render 'feedbacks/reviews/company_reviews', company: current_company), class: 'px-4' %>
          <!-- Company name -->
          <%= tag.h4 (current_company.title), class: "px-4 -mt-1 font-medium text-gray-800 text-center hover:underline"%>
          <!-- Email -->
          <%= tag.p current_company.email, class: "px-4 py-2 text-sm font-medium text-gray-600 text-center hover:underline"%>
       <% end %>

       <hr>
       <!-- Chats -->
       <%= link_to rooms_path, 
           class: "font-medium flex block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 items-center", 
           data: {action: "dropdown#toggle"}, 
           role: "menuitem",
           tabindex:"-1",
           id:"profilePageLink" do
       %>
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 mr-2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 01-.825-.242m9.345-8.334a2.126 2.126 0 00-.476-.095 48.64 48.64 0 00-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0011.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155" />
          </svg>
          <%= t('user_menu.chats')%>
       <% end %>
       
       <!-- Dashboard page -->
       <!-- <%= link_to companies_dashboard_path,
           class: "font-medium flex block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 items-center",
           data: {action: "dropdown#toggle"},
           role: "menuitem",
           tabindex:"-1",
           id:"profilePageLink" do
       %>
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 mr-2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z" />
          </svg>
          <%= t('user_menu.dashboard')%>
       <% end %> -->
   
       <!-- Calculator -->
       <%= link_to companies_prices_path, 
           class: "font-medium flex block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 items-center", 
           data: { action: "dropdown#toggle" }, 
           role: "menuitem",
           tabindex:"-1",
           id:"profilePageLink" do
       %>
           <%= image_tag(asset_path('icons/icons8-calculator-checked-64.png'), class: "w-4 h-4 mr-2")%>
           <%= t('calculator.title')%>
       <% end %>
       
       <hr>
       <!-- New truck page -->
       <%= link_to new_companies_truck_path, 
           class: "font-medium flex block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 items-center", 
           data: {action: "dropdown#toggle"}, 
           role: "menuitem",
           tabindex:"-1",
           id:"profilePageLink" do
       %>
           <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 mr-2">
             <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />
           </svg>
           <%= t('company_menu.add_truck')%>
       <% end %>
   
       <!-- All company trucks -->
       <%= link_to companies_trucks_path, 
           class: "font-medium flex block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 items-center", 
           data: { action: "dropdown#toggle" }, 
           role: "menuitem",
           tabindex:"-1",
           id:"profilePageLink" do
       %>
           <%= image_tag(asset_path('icons/icons8-in-transit-50.png'), class: "w-4 h-4 mr-2")%>
           <%= t('company_menu.trucks')%>
       <% end %>
   
       <hr>
       <!-- New product page -->
       <%= link_to new_companies_product_path, 
           class: "font-medium flex block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 items-center", 
           data: {action: "dropdown#toggle"}, 
           role: "menuitem",
           tabindex:"-1",
           id:"profilePageLink" do
       %>
           <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 mr-2">
             <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />
           </svg>
           <%= t('company_menu.add_product')%>
       <% end %>
   
       <!-- All products trucks -->
       <%= link_to companies_products_path, 
           class: "font-medium flex block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 items-center", 
           data: { action: "dropdown#toggle" }, 
           role: "menuitem",
           tabindex:"-1",
           id:"profilePageLink" do
       %>
           <%= image_tag(asset_path('icons/icons8-lounge-50.png'), class: "w-4 h-4 mr-2")%>
           <%= t('company_menu.products')%>
       <% end %>
 
      <hr>
      <!-- Personal Info -->
      <%= link_to companies_edit_profile_path, 
          class: "font-medium flex block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 items-center", 
          data: {action: "dropdown#toggle"}, 
          role: "menuitem",
          tabindex:"-1",
          id:"personalInfoLink" do
      %>
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 mr-2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 002.25-2.25V6.75A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25v10.5A2.25 2.25 0 004.5 19.5zm6-10.125a1.875 1.875 0 11-3.75 0 1.875 1.875 0 013.75 0zm1.294 6.336a6.721 6.721 0 01-3.17.789 6.721 6.721 0 01-3.168-.789 3.376 3.376 0 016.338 0z" />
          </svg>
          <%= t('user_menu.profile')%>
      <% end %>
  
      <!-- Company Info -->
      <%= link_to companies_edit_company_info_path, 
          class: "font-medium flex block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 items-center", 
          data: {action: "dropdown#toggle"}, 
          role: "menuitem",
          tabindex:"-1",
          id:"personalInfoLink" do
      %>
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 mr-2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21" />
          </svg>
          <%= t('company_menu.company_info')%>
      <% end %>
  
      <!-- Credential Info -->
      <%= link_to edit_company_registration_path, 
          class: "font-medium flex block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 items-center", 
          data: { action: "dropdown#toggle" }, 
          role: "menuitem",
          tabindex:"-1",
          id:"password&SecurityLink" do 
      %>
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 mr-2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z" />
          </svg>
          <%= t('user_menu.credential')%>
      <% end %>
  
      <hr>
      <!-- Sign Out -->
      <%= link_to destroy_company_session_path, 
          class: "font-medium flex block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 items-center",
          data: {action: "dropdown#toggle", turbo_method: :delete, turbo_confirm: t('global.are_you_sure')}, 
          role: "menuitem", 
          tabindex:"-1", 
          id:"signOutLink" do 
      %>
         <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 mr-2">
           <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9" />
         </svg>
         <%= t('user_menu.sign_out')%>
      <% end %>
    </div>
</div>
# frozen_string_literal: true

module Mailers
  class CompanyMailer < ApplicationMailer

    def message_template(user, subject, main_content)
      @h1 = "–ü—Ä–∏–≤–µ—Ç #{user.user_name} üëãüèª"
      @main_content = main_content
      
      mail to: user.email, 
           subject: subject
    end
  
    def sending
      subject = '–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ'
      main_content = "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–≤–æ–∑—á–∏–∫–æ–≤ –≤ —Å–µ—Ä–≤–∏—Å–µ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —Ä–∞—Å—Ç–µ—Ç –∏ —á—Ç–æ–±—ã –∫–ª–∏–µ–Ω—Ç—É –±—ã–ª–æ —É–¥–æ–±–Ω–µ–µ –≤–∞—Å –Ω–∞–π—Ç–∏, —Ç–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ —É–∫–∞–∑–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —É—Å–ª—É–≥, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –æ–∫–∞–∑—ã–≤–∞–µ—Ç–µ, –¥–ª—è —ç—Ç–æ–≥–æ –≤–∞–º –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –ø–æ –≤–∫–ª–∞–¥–∫–µ '–û –∫–æ–º–ø–∞–Ω–∏–∏' –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –∏ –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ —Ä–∞–∑–¥–µ–ª–µ —É—Å–ª—É–≥–∏. –¢–∞–∫ –∂–µ, —Ç–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –¥–ª—è –≤–∞—à–µ–≥–æ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–∞—à –∞–≤—Ç–æ–ø–∞—Ä–∫ –∏ –≤–∞—à—É –∫–æ–º–∞–Ω–¥—É, –ø–µ—Ä–µ–π–¥—è –ø–æ –≤–∫–ª–∞–¥–∫–µ '–ì–∞–ª–µ—Ä–µ—è' –≤ –≤–∞—à–µ–º –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ. <br> –ó–∞—Ö–æ–¥–∏—Ç–µ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –∏ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–∏, —á—Ç–æ–±—ã –≤—ã–¥–µ–ª–∏—Ç—å—Å—è —Å—Ä–µ–¥–∏ –¥—Ä—É–≥–∏—Ö –ø–µ—Ä–µ–≤–æ–∑—á–∏–∫–æ–≤ –∏ –ø—Ä–∏–≤–ª–µ—á—å —Å–≤–æ–µ–≥–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞!"
      
      User.where.not(type: 'Client').each do |user| 
        Mailers::CompanyMailer.message_template(user, subject, main_content).deliver_later 
      end
    end
    
    def test_sending
      subject = '–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ'
      main_content = "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–≤–æ–∑—á–∏–∫–æ–≤ –≤ —Å–µ—Ä–≤–∏—Å–µ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —Ä–∞—Å—Ç–µ—Ç –∏ —á—Ç–æ–±—ã –∫–ª–∏–µ–Ω—Ç—É –±—ã–ª–æ —É–¥–æ–±–Ω–µ–µ –≤–∞—Å –Ω–∞–π—Ç–∏, —Ç–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ —É–∫–∞–∑–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —É—Å–ª—É–≥, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –æ–∫–∞–∑—ã–≤–∞–µ—Ç–µ, –¥–ª—è —ç—Ç–æ–≥–æ –≤–∞–º –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –ø–æ –≤–∫–ª–∞–¥–∫–µ '–û –∫–æ–º–ø–∞–Ω–∏–∏' –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –∏ –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ —Ä–∞–∑–¥–µ–ª–µ —É—Å–ª—É–≥–∏. –¢–∞–∫ –∂–µ, —Ç–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –¥–ª—è –≤–∞—à–µ–≥–æ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–∞—à –∞–≤—Ç–æ–ø–∞—Ä–∫ –∏ –≤–∞—à—É –∫–æ–º–∞–Ω–¥—É, –ø–µ—Ä–µ–π–¥—è –ø–æ –≤–∫–ª–∞–¥–∫–µ '–ì–∞–ª–µ—Ä–µ—è' –≤ –≤–∞—à–µ–º –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ. <br> –ó–∞—Ö–æ–¥–∏—Ç–µ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –∏ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–∏, —á—Ç–æ–±—ã –≤—ã–¥–µ–ª–∏—Ç—å—Å—è —Å—Ä–µ–¥–∏ –¥—Ä—É–≥–∏—Ö –ø–µ—Ä–µ–≤–æ–∑—á–∏–∫–æ–≤ –∏ –ø—Ä–∏–≤–ª–µ—á—å —Å–≤–æ–µ–≥–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞!"
      
      Mailers::CompanyMailer.message_template(Admin.first, subject, main_content).deliver_now 
    end
  end
end
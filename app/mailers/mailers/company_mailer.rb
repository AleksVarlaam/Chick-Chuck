# frozen_string_literal: true
# Preview all emails at http://localhost:3000/rails/mailers/company_mailer/example.html

module Mailers
  class CompanyMailer < ApplicationMailer

    def message_template(user, subject, main_content)
      @h1 = "–ü—Ä–∏–≤–µ—Ç #{user.user_name} üëãüèª"
      @main_content = main_content
      
      mail to: user.email, 
           subject: subject
    end
  
    def sending
      subject = '–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ'
      main_content = "–ù–∞ —Å–∞–π—Ç–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ –Ω–µ–±–æ–ª—å—à–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±–Ω–æ–≤–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–∏ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –¥–ª—è –±–æ–ª–µ–µ –ª—É—á—à–µ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–∞—à–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è –Ω–∞ —Å–∞–π—Ç–µ. <br> –ö–æ–Ω–∫—Ä–µ—Ç–Ω–µ–µ: <br> - –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∑–∞–Ω–æ–≤–æ –≤–∞—à –ª–æ–≥–æ—Ç–∏–ø –¥–ª—è –±–æ–ª–µ–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è; <br> - –£–∫–∞–∂–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —É—Å–ª—É–≥, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –æ–∫–∞–∑—ã–≤–∞–µ—Ç–µ. <br> - –û–±–Ω–æ–≤–∏—Ç–µ –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –ø—É–Ω–∫—Ç '–û–ø–∏—Å–∞–Ω–∏–µ –∏–ª–∏ —Å–ª–æ–≥–∞–Ω' –∏—Å–ø–æ–ª—å–∑—É—è –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä."
      
      User.where.not(type: 'Client').each do |user| 
        Mailers::CompanyMailer.message_template(user, subject, main_content).deliver_later 
      end
    end
    
    def test_sending
      subject = '–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ'
      main_content = "–ù–∞ —Å–∞–π—Ç–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ –Ω–µ–±–æ–ª—å—à–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±–Ω–æ–≤–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–∏ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –¥–ª—è –±–æ–ª–µ–µ –ª—É—á—à–µ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–∞—à–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è –Ω–∞ —Å–∞–π—Ç–µ. <br> –ö–æ–Ω–∫—Ä–µ—Ç–Ω–µ–µ: <br> - –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∑–∞–Ω–æ–≤–æ –≤–∞—à –ª–æ–≥–æ—Ç–∏–ø –¥–ª—è –±–æ–ª–µ–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è; <br> - –£–∫–∞–∂–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —É—Å–ª—É–≥, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –æ–∫–∞–∑—ã–≤–∞–µ—Ç–µ. <br> - –û–±–Ω–æ–≤–∏—Ç–µ –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –ø—É–Ω–∫—Ç '–û–ø–∏—Å–∞–Ω–∏–µ –∏–ª–∏ —Å–ª–æ–≥–∞–Ω' –∏—Å–ø–æ–ª—å–∑—É—è –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä."
      
      Mailers::CompanyMailer.message_template(Admin.first, subject, main_content).deliver_now 
    end
  end
end